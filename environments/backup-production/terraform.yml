account_alias: commcare-backup-production
terraform_version: '1.5'
state_bucket: dimagi-terraform
state_bucket_region: "us-east-1"
region: "us-east-2"
environment: "bk-production"
ssl_policy: 'ELBSecurityPolicy-FS-1-2-Res-2020-10'
azs:
  - "us-east-2b"
  - "us-east-2c"
az_codes:
  - b
  - c
vpc_begin_range: "10.212"

ec2_metadata_tokens_required: yes

servers:
  - server_name: "control_a0-bk-production"
    server_instance_type: t3a.medium
    network_tier: "app-private"
    az: "c"
    volume_size: 20
    group: "control"
    os: jammy

  - server_name: "couch_a0-bk-production"
    server_instance_type: t3a.small
    network_tier: "db-private"
    az: "c"
    volume_size: 20
    volume_encrypted: yes
    block_device:
      volume_size: 1000
      encrypted: yes
    group: "couchdb2"
    os: jammy

  - server_name: "couch_a1-bk-production"
    server_instance_type: t3a.small
    network_tier: "db-private"
    az: "c"
    volume_size: 20
    volume_encrypted: yes
    block_device:
      volume_size: 1000
      encrypted: yes
    group: "couchdb2"
    os: jammy

  - server_name: "couch_a2-bk-production"
    server_instance_type: t3a.small
    network_tier: "db-private"
    az: "c"
    volume_size: 20
    volume_encrypted: yes
    block_device:
      volume_size: 1000
      encrypted: yes
    group: "couchdb2"
    os: jammy

internal_albs:
  - name: "couch_alb-bk-production"
    listener_port: 25984
    target_port: 15984
    health_check_interval: 30
    targets:
      - couch_a0-bk-production

