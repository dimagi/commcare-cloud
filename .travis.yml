---
language: python
python: "2.7"

env:
  - ANSIBLE_ROLES_PATH="~/.ansible/roles"

before_install:
  # Make sure everything's up to date.
  - sudo apt-get update -qq

install:
  - pip install -r ansible/requirements.txt
  - ansible-galaxy install -r ansible/requirements.yml

script:
  - ".travis/tests.sh"
  - "diff <(ansible -h) commcare-cloud/commcare_cloud/help_cache/ansible.txt"
  - "diff <(ansible-playbook -h) commcare-cloud/commcare_cloud/help_cache/ansible-playbook.txt"
  - "./commcare-cloud/tests/test_vars.sh"
