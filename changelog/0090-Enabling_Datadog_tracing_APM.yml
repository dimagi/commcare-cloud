title: Enabling Datadog tracing (APM)
key: Enabling_Datadog_tracing_APM
date: 2025-10-08
optional_per_env: yes
# (optional) Min version of HQ that MUST be deployed before this change can be rolled out (commit hash)
min_commcare_version:
# (optional) Max version of HQ that can be deployed before this change MUST be rolled out (commit hash)
max_commcare_version:
context: |
  Configuration for enabling Datadog tracing with APM has changed. If you
  use this feature you may need to update your configuration.

details: |
  Previously variables `datadog_pythonagent`, `django_command_prefix`, and
  `celery_command_prefix` could be used to enable Datadog APM on specific
  processes. If you are using any of those options, you should update your
  configuration to use the new `env_vars` sections of `app-processes.yml`
  in your environment configuration.

update_steps: |
  See usages of `env_vars` in
  [app-processes.yml](https://github.com/dimagi/commcare-cloud/blob/758df2f362d955d8b3740f32f0e7b14610f59b3a/environments/production/app-processes.yml)
  for examples.

  See https://github.com/dimagi/commcare-cloud/pull/6700 for a technical
  overview of what changed.
