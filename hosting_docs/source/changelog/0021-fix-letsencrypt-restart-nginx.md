<!--THIS FILE IS AUTOGENERATED: DO NOT EDIT-->
<!--See https://github.com/dimagi/commcare-cloud/blob/master/changelog/README.md for instructions-->
# 21. Fix to restart nginx after every letsencrypt cert auto-renewal

**Date:** 2019-02-26

**Optional per env:** _only required on some environments_


## CommCare Version Dependency
This change is not known to be dependent on any particular version of CommCare.


## Change Context
Previously you had to manually restart nginx every time letsencrypt auto-renewed,
which was about every two months. We believed we had fixed this with
[Restart nginx after every letsencrypt cert auto-renewal](0010-letsencrypt-restart-nginx),
but there was an error in our setup at that time that made it not work as intended.

## Details
This migration applies an update to the cron job that triggers renewing the letsencrypt cert,
that makes it also restart nginx directly after renewing.
This makes the cert renewal process completely automatic
so that staying on an up-to-date cert indefinitely
should no longer require human intervention.

## Steps to update
To apply, simply run
```
commcare-cloud <env> ansible-playbook deploy_proxy.yml --tags=setup_letsencrypt
```
using the latest version of commcare-cloud.
