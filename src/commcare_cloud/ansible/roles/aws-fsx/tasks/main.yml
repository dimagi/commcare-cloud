- assert:
    that:
      - fsx_mount_uid != ''
      - fsx_mount_gid != ''
      - fsx_mount_dir != ''
    fail_msg: "fsx_mount_uid={{ fsx_mount_uid }} fsx_mount_gid={{ fsx_mount_gid }} fsx_mount_dir={{ fsx_mount_dir }}"
    success_msg: "fsx_mount_uid={{ fsx_mount_uid }} fsx_mount_gid={{ fsx_mount_gid }} fsx_mount_dir={{ fsx_mount_dir }}"

- import_tasks: roles/shared_dir/tasks/setup_client.yml
  vars:
    shared_drive_enabled: yes
    shared_mount_dir: "{{ fsx_mount_dir }}"
    shared_dir_user: "{{ fsx_mount_uid }}"
    shared_dir_group: "{{ fsx_mount_gid }}"
    shared_mount_address: "{{ formplayer_fsx_dns }}"
    shared_mount_opts: "_netdev,nfsvers=4.2,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport,_netdev 0 0"
