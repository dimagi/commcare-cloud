{% if ALTERNATE_FORMPLAYER_HQ_HOST is defined %}
commcarehq.host=https://{{ ALTERNATE_FORMPLAYER_HQ_HOST }}
{% else %}
commcarehq.host=https://{{ SITE_HOST }}
{% endif %}
commcarehq.environment={{ env_monitoring_id }}
commcarehq.formplayerAuthKey={{ FORMPLAYER_INTERNAL_AUTH_KEY }}
server.port={{ formplayer_port }}
user.suffix=commcarehq.org
logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=INFO
sqlite.dataDir={{ formplayer_data_dir }}/
// Takes the format of https://<key>@sentry.io/<project>
// More info on the DSN can be found here: https://docs.sentry.io/quickstart/#configure-the-dsn
{% if http_proxy_address is defined %}
sentry.dsn={{ formplayer_sentry_dsn }}?http.proxy.host={{ http_proxy_address }}&http.proxy.port={{ http_proxy_port }}
{% else %}
sentry.dsn={{ formplayer_sentry_dsn }}
{% endif %}

spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://{{ postgresql_dbs.formplayer.pgbouncer_host }}:{{ postgresql_dbs.formplayer.port
}}/{{ formplayer_db_name }}?prepareThreshold=0
spring.datasource.username={{ postgres_users.commcare.username }}
spring.datasource.password={{ postgres_users.commcare.password }}

spring.jpa.hibernate.ddl-auto

smtp.host={{ localsettings.EMAIL_SMTP_HOST }}
smtp.port={{ localsettings.EMAIL_SMTP_PORT }}
smtp.username={{ EMAIL_LOGIN }}
{% if EMAIL_PASSWORD %}
smtp.password={{ EMAIL_PASSWORD }}
{% else %}
smtp.password=dummy
{% endif %}

smtp.from.address=commcarehq-noreply+{{ inventory_hostname_short }}@dimagi.com
smtp.to.address=commcarehq-ops+formplayer@dimagi.com

// Redis for locking
{% if is_redis_cluster %}
redis.clusterString={{ groups.redis_cluster_master | join(":" + localsettings.REDIS_PORT + ",") }}:{{ localsettings.REDIS_PORT }}
{% else %}
redis.hostname={{ localsettings.REDIS_HOST }}
{% endif %}

{% if localsettings.get('REDIS_PASSWORD') %}
redis.Password={{ localsettings.REDIS_PASSWORD }}
{% endif %}

endpoints.enabled=true
management.address: 0.0.0.0
management.port: 8081
