- hosts: all
  tasks:
  - name: Update package list
    become: yes
    apt: update_cache=yes
    when: ansible_distribution_version == '18.04' or ansible_distibution_version == '16.04'

  - name: Reinstall removed packages
    become: yes
    apt:
      name:
        - apparmor
        - apport
        - byobu
        - cloud-guest-utils
        - cloud-init
        - command-not-found
        - dh-python
        - hibagent
        - iotop
        - landscape-common
        - language-selector-common
        - libglib2.0-dev
        - libglib2.0-dev-bin
        - libharfbuzz-dev
        - libicu-dev
        - libicu-le-hb-dev
        - libxml2-dev
        - libxslt1-dev
        - lsb-release
        - netplan.io
        - networkd-dispatcher
        - nplan
        - pastebinit
        - plymouth-theme-ubuntu-text
        - python3
        - python3-apport
        - python3-apt
        - python3-asn1crypto
        - python3-attr
        - python3-automat
        - python3-blinker
        - python3-certifi
        - python3-cffi-backend
        - python3-chardet
        - python3-click
        - python3-colorama
        - python3-commandnotfound
        - python3-configobj
        - python3-constantly
        - python3-crypto
        - python3-cryptography
        - python3-dbus
        - python3-debconf
        - python3-debian
        - python3-dev
        - python3-distro-info
        - python3-distupgrade
        - python3-distutils
        - python3-docutils
        - python3-gdbm
        - python3-gi
        - python3-httplib2
        - python3-hyperlink
        - python3-idna
        - python3-incremental
        - python3-jinja2
        - python3-json-pointer
        - python3-jsonpatch
        - python3-jsonschema
        - python3-jwt
        - python3-keyring
        - python3-keyrings.alt
        - python3-lib2to3
        - python3-markupsafe
        - python3-netifaces
        - python3-newt
        - python3-oauthlib
        - python3-olefile
        - python3-openssl
        - python3-pam
        - python3-pil
        - python3-pip
        - python3-pkg-resources
        - python3-problem-report
        - python3-psycopg2
        - python3-pyasn1
        - python3-pyasn1-modules
        - python3-pygments
        - python3-requests
        - python3-requests-unixsocket
        - python3-roman
        - python3-secretstorage
        - python3-serial
        - python3-service-identity
        - python3-setuptools
        - python3-six
        - python3-software-properties
        - python3-systemd
        - python3-twisted
        - python3-twisted-bin
        - python3-update-manager
        - python3-urllib3
        - python3-wheel
        - python3-xdg
        - python3-yaml
        - python3-zope.interface
        - python3.6
        - python3.6-dev
        - snapd
        - software-properties-common
        - sosreport
        - ssh-import-id
        - ubuntu-minimal
        - ubuntu-release-upgrader-core
        - ubuntu-server
        - ubuntu-standard
        - ufw
        - unattended-upgrades
        - update-manager-core
        - update-notifier-common
    when: ansible_distribution_version == '18.04' or ansible_distibution_version == '16.04'
