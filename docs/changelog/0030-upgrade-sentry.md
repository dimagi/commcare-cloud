<!--THIS FILE IS AUTOGENERATED: DO NOT EDIT-->
<!--See https://github.com/dimagi/commcare-cloud/blob/master/changelog/README.md for instructions-->
# 30. Upgrade Sentry

**Date:** 2019-08-30

**Optional per env:** _only required on some environments_


## CommCare Version Dependency
The following version of CommCare must be deployed before rolling out this change:
[19be5069](https://github.com/dimagi/commcare-hq/commit/19be50699bf78b25a8da6e3e13eb5bc6d13245e8)


## Change Context
The Sentry SDK used by CommCare HQ has been updated and along with it we have updated the
configuration parameters.

## Details
As part of our ongoing effort to keep CommCare HQ up to date with the latest tools and
libraries we have updated the Sentry integration to use the new Sentry SDK. During that
process we have re-structred how the configuration is set and have also fixed a few
places that were not configurable such as Organization and Project.

## Steps to update
Update `vault.yml`:

```diff
  localsettings_private:
-   SENTRY_PUBLIC_KEY: 'xxx'
-   SENTRY_PRIVATE_KEY: 'xxx'
-   SENTRY_PROJECT_ID: 'xxx'
-   SENTRY_QUERY_URL: 'https://...'
+   SENTRY_DSN: 'dsn from Sentry'
```

Update `public.yml`:

```diff
  localsettings:
+   SENTRY_ORGANIZATION_SLUG: 'org slug'
+   SENTRY_PROJECT_SLUG: 'project slug'
+   SENTRY_REPOSITORY: 'repository name'
```

See [Sentry doc](../monitoring/set-up-sentry.md) for full Sentry configuration details.
