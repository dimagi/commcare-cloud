<!--THIS FILE IS AUTOGENERATED: DO NOT EDIT-->
<!--See https://github.com/dimagi/commcare-cloud/blob/master/changelog/README.md for instructions-->
# 86. AWS S3 Client Library Upgrade

**Date:** 2025-03-27

**Optional per env:** _only required on some environments_


## CommCare Version Dependency
CommCare versions beyond the following commit require this change to function correctly:
[61cd1f25](https://github.com/dimagi/commcare-hq/commit/61cd1f25298069c63aa7c2c1e915096afaef462b)


## Change Context
The `botocore` library is being upgraded in CommCare HQ. A blob db
configuration change may be necessary prior to deploying the new version.

## Details
If you use Amazon S3 for blob storage and you use a bucket outside of
`us-east-1` you will need to change the endpoint URL in your environment
configuration before the botocore dependency of CommCare HQ is upgraded to or
beyond 1.28.0.

## Steps to update
Update `s3_blob_db_url` in your environment's `public.yml` file to the
region-specific URL where your blob db bucket resides. For example, if your
AWS region is `ap-south-1` then you should change the URL from
`https://s3.amazonaws.com` to `https://s3.ap-south-1.amazonaws.com`.

See https://github.com/dimagi/commcare-cloud/pull/6504/files for an example
of how to make this change.

After making this change in your environment file, run the following command
to roll it out with commcare-cloud.

```sh
cchq <env> update-config
```

The changes will be applied on the next deploy. If you wish to apply them
immediately, run the following command.

```sh
cchq <env> service commcare restart
```
