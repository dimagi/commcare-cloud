{"notify_list":[],"description":"","template_variables":[{"default":"icds","prefix":"environment","name":"environment"}],"is_read_only":false,"id":"a4u-nfz-gex","title":"Mobile Request Success","url":"/dashboard/a4u-nfz-gex/mobile-request-success","created_at":"2017-04-28T17:58:56.713470+00:00","modified_at":"2020-04-02T08:45:17.678741+00:00","author_handle":"cellowitz@dimagi.com","widgets":[{"definition":{"title":"Restores by status code (hourly)","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment,url_group:phone} by {status_code}.rollup(sum, 3600), sum:nginx.requests{$environment,url_group:phone/restore} by {status_code}.rollup(sum, 3600)","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":201266268},{"definition":{"title":"Restores: % Correct Response (daily)","markers":[{"display_type":"ok dashed","value":"y = 100"}],"show_legend":false,"requests":[{"q":"(sum:nginx.requests{$environment,status_code:412,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:202,url_group:phone/restore}.rollup(sum, 86400))*100/(sum:nginx.requests{$environment,url_group:phone/restore}.rollup(sum, 86400)-sum:nginx.requests{$environment,status_code:401,url_group:phone/restore}.rollup(sum, 86400))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"},{"q":"(sum:nginx.requests{$environment,status_code:412,url_group:phone}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:202,url_group:phone}.rollup(sum, 86400))*100/(sum:nginx.requests{$environment,url_group:phone}.rollup(sum, 86400)-sum:nginx.requests{$environment,status_code:401,url_group:phone}.rollup(sum, 86400))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend((sum:nginx.requests{$environment,status_code:412,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:202,url_group:phone/restore}.rollup(sum, 86400))*100/(sum:nginx.requests{$environment,url_group:phone/restore}.rollup(sum, 86400)-sum:nginx.requests{$environment,status_code:401,url_group:phone/restore}.rollup(sum, 86400)))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"line"}],"type":"timeseries","legend_size":"0"},"id":201275801},{"definition":{"title":"Successful Restores (hourly)","events":[{"q":"tags:$environment Deploy Successful","tags_execution":"and"}],"show_legend":false,"requests":[{"q":"sum:commcare.restores.count{$environment}.as_count().rollup(sum, 3600)","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":201277134},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone}.rollup(sum, 86400))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"line"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Successful Restores (daily)"},"id":201277133},{"definition":{"title":"Form submissions: % Correct Response (hourly)","yaxis":{"max":"auto","include_zero":true,"scale":"linear","min":"auto","label":""},"markers":[{"display_type":"ok dashed","value":"y = 100"}],"show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 3600)*100/(sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum, 3600)-sum:nginx.requests{$environment,url_group:receiver,status_code:401}.as_count().rollup(sum, 3600))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":201287473},{"definition":{"title":"Form submissions: % Correct Response (daily)","markers":[{"display_type":"ok dashed","value":"y = 100"}],"show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 86400)*100/(sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum, 86400)-sum:nginx.requests{$environment,url_group:receiver,status_code:401}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 86400)*100/(sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum, 86400)-sum:nginx.requests{$environment,url_group:receiver,status_code:401}.as_count().rollup(sum, 86400)))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","legend_size":"0"},"id":201304765},{"definition":{"title":"Successful form submissions (hourly)","yaxis":{"max":"auto","include_zero":true,"scale":"linear","min":"auto","label":""},"show_legend":false,"time":{},"requests":[{"q":"sum:commcare.xform_submissions.count{$environment}.as_count().rollup(sum, 3600)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":201278361},{"definition":{"title":"Successful form submissions (hourly)","yaxis":{"max":"auto","include_zero":true,"scale":"linear","min":"auto","label":""},"show_legend":false,"time":{},"requests":[{"q":"sum:commcare.xform_submissions.count{$environment}.as_count().rollup(sum), sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","legend_size":"0"},"id":159783821908752},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Successful form submissions (daily)"},"id":201277055},{"definition":{"title":"Restores by status code (daily)","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment,url_group:phone,!status_code:401} by {status_code}.rollup(sum, 86400), sum:nginx.requests{$environment,url_group:phone/restore,!status_code:401} by {status_code}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":201275243},{"definition":{"title":"Form submissions by status code (hourly)","yaxis":{"max":"auto","include_zero":true,"scale":"linear","min":"auto","label":""},"legend_size":"0","show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver} by {status_code}.as_count().rollup(sum, 3600)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}]},"id":201276823},{"definition":{"title":"Form submissions by status code (daily)","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,!status_code:401} by {status_code}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":201278363},{"definition":{"title":"App installs success rate (by day)","yaxis":{"max":"100"},"markers":[{"display_type":"ok dashed","value":"y = 100"}],"show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment,url_group:apps,status_code:200}.as_count().rollup(sum, 86400)*100/sum:nginx.requests{$environment,url_group:apps}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":233657084},{"definition":{"title":"Requests by status code","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment} by {status_code}.rollup(sum, 3600)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":840637135136272},{"definition":{"title":"Total Requests (hourly)","yaxis":{"max":"auto","include_zero":true,"scale":"linear","min":"auto","label":""},"legend_size":"0","show_legend":false,"time":{},"requests":[{"q":"sum:nginx.requests{$environment}.rollup(sum)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}]},"id":201277054},{"definition":{"title":"Total Requests (daily)","yaxis":{"max":"auto","include_zero":true,"scale":"linear","min":"auto","label":""},"show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:nginx.requests{$environment}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(sum:nginx.requests{$environment}.rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}]},"id":201276826},{"definition":{"title":"Total Requests (daily)","events":[{"q":"tags:$environment Deploy Successful","tags_execution":"and"}],"show_legend":false,"requests":[{"q":"100*sum:nginx.requests{$environment} by {url_group}.rollup(sum, 86400)/sum:nginx.requests{$environment}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":3504781610682194},{"definition":{"title":"Rate limiting: % limited requests (hourly)","markers":[{"display_type":"error dashed","value":"y = 100"}],"show_legend":false,"requests":[{"q":"100*sum:nginx.requests{$environment,status_code:503}.as_count().rollup(sum, 3600)/sum:nginx.requests{$environment}.as_count().rollup(sum, 3600)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":241296737},{"definition":{"title":"Rate limiting: % limited requests (daily)","markers":[{"display_type":"error dashed","value":"y = 100"}],"show_legend":false,"requests":[{"q":"100*sum:nginx.requests{$environment,status_code:503}.as_count().rollup(sum, 86400)/sum:nginx.requests{$environment}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(100*sum:nginx.requests{$environment,status_code:503}.as_count().rollup(sum, 86400)/sum:nginx.requests{$environment}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","legend_size":"0"},"id":255625236},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:apps}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"App installs by day"},"id":332896474},{"definition":{"title":"Service interruptions per hour","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"show_legend":false,"requests":[{"q":"sum:commcare.sentry.errors.rate_limited{$environment} by {service}.as_count().rollup(sum, 3600)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":201899713},{"definition":{"requests":[{"q":"sum:commcare.sentry.errors.rate_limited{$environment} by {service}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Service Interruptions per day"},"id":202860671},{"definition":{"requests":[{"q":"top(100*sum:commcare.restores.count{$environment} by {app}.as_count()/sum:commcare.restores.count{$environment}.as_count(),100,'mean','desc')"}],"type":"toplist","title":"% Restores by App (enterprise only)"},"id":311843007},{"definition":{"title":"% Restores by App (enterprise only) (top 10)","yaxis":{"max":"auto","include_zero":true,"scale":"linear","min":"auto","label":""},"show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"100*sum:commcare.restores.count{$environment} by {app}.as_count().rollup(sum)/sum:commcare.restores.count{$environment}.as_count().rollup(sum)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"area"}]},"id":2870994779452482},{"definition":{"requests":[{"q":"sum:commcare.xform_submissions.duration.seconds{$environment} by {duration}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Form submission timing"},"id":384868429},{"definition":{"requests":[{"q":"sum:commcare.restores.duration.seconds{$environment} by {duration}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Restore timing"},"id":384868444},{"definition":{"requests":[{"q":"top(cumsum(sum:commcare.xform_submissions.count{$environment} by {submission_type}.as_count()), 10, 'last', 'desc')","style":{"palette":"dog_classic"}}],"type":"toplist","title":"Sum of commcare.xform_submissions.count over $environment by submission_type"},"id":5698694210794582},{"definition":{"requests":[{"q":"top(cumsum(sum:commcare.restores.count{$environment}.as_count()), 10, 'last', 'desc')","style":{"palette":"dog_classic"}}],"type":"toplist","title":"Sum of commcare.restores.count over $environment"},"id":399588888},{"definition":{"title":"OTA APIs","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"show_legend":false,"requests":[{"q":"sum:nginx.requests{$environment,url_group:phone/keys}, sum:nginx.requests{$environment,url_group:phone/search}, sum:nginx.requests{$environment,url_group:phone/heartbeat}, sum:nginx.requests{$environment,url_group:phone/claim-case}","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":7987927523934248},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver}.rollup(sum, 86400), sum:nginx.requests{$environment,url_group:phone/restore}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Submission & Restore Total Requests (daily)"},"id":2335370103052894},{"definition":{"requests":[{"change_type":"absolute","order_dir":"desc","compare_to":"week_before","q":"sum:nginx.requests{$environment} by {url_group}.as_count()","increase_good":true,"order_by":"change"}],"type":"change","title":"Requests (change since last week)"},"id":2804499936385206},{"definition":{"requests":[{"q":"exclude_null(sum:commcare.xform_submissions.lag.days{$environment} by {lag}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Form Submission lag"},"id":8088574552437732},{"definition":{"title":"Receiver Rate Limit Intensity (daily)","yaxis":{"max":"auto","include_zero":true,"scale":"linear","min":"auto","label":""},"show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"100*(sum:nginx.requests{$environment,status_code:503,url_group:receiver}.as_count().rollup(sum, 86400)+sum:nginx.requests{$environment,url_group:receiver,status_code:429}.as_count().rollup(sum, 86400))/sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}]},"id":4090895164242738},{"definition":{"requests":[{"q":"sum:commcare.xform_submissions.count{$environment} by {submission_type}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"trend_line(sum:commcare.xform_submissions.count{$environment} by {submission_type}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"commcare.xform_submissions.count, commcare.xform_submissions.count"},"id":3315311190851886},{"definition":{"title":"Rate limiting: % limited requests (daily)","markers":[{"display_type":"error dashed","value":"y = 100"}],"show_legend":false,"requests":[{"q":"100*(sum:nginx.requests{$environment,status_code:503,url_group:receiver}.as_count().rollup(sum, 86400)+sum:nginx.requests{$environment,url_group:receiver,status_code:429}.as_count().rollup(sum, 86400))/sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0"},"id":8114204003097390},{"definition":{"requests":[{"q":"exclude_null(sum:commcare.xform_submissions.lag.days{$environment,!lag:lt_001d} by {lag}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"warm","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Form Submission lag (>1 day)"},"id":44131849031150},{"definition":{"requests":[{"q":"100*(exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_002d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_004d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_007d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_014d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_031d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_090d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:over_090d}.as_count().rollup(sum, 86400)))/(exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_001d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_002d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_004d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_007d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_014d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_031d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:lt_090d}.as_count().rollup(sum, 86400))+exclude_null(sum:commcare.xform_submissions.lag.days{$environment,lag:over_090d}.as_count().rollup(sum, 86400)))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","legend_size":"0","show_legend":false,"title":"Proportion of Forms Received Which are \"late\" (daily)"},"id":1175089871414356}],"layout_type":"ordered"}